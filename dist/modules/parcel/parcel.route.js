"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parcelRouter = void 0;
const express_1 = require("express");
const Validation_1 = require("../../middleware/Validation");
const parcel_validator_1 = require("./parcel.validator");
const CheckAuth_1 = require("../../middleware/CheckAuth");
const user_interface_1 = require("../user/user.interface");
const parcel_controller_1 = require("./parcel.controller");
const router = (0, express_1.Router)();
router.route("/").post((0, Validation_1.validation)(parcel_validator_1.parcelCreateZodSchema), (0, CheckAuth_1.checkAuth)([user_interface_1.Role.SENDER]), parcel_controller_1.parcelControllers.createParcel);
router.route("/").get((0, CheckAuth_1.checkAuth)([user_interface_1.Role.ADMIN]), parcel_controller_1.parcelControllers.getAllParcel);
router.route("/sender-parcels").get((0, CheckAuth_1.checkAuth)([user_interface_1.Role.SENDER]), parcel_controller_1.parcelControllers.getSenderParcels);
router.route("/receiver-parcels").get((0, CheckAuth_1.checkAuth)([user_interface_1.Role.RECEIVER]), parcel_controller_1.parcelControllers.getReceiverParcels);
router.route("/:id").get((0, CheckAuth_1.checkAuth)([user_interface_1.Role.ADMIN, user_interface_1.Role.SENDER, user_interface_1.Role.RECEIVER]), parcel_controller_1.parcelControllers.getParcel);
router.route("/:id").patch((0, Validation_1.validation)(parcel_validator_1.parcelUpdateZodSchema), (0, CheckAuth_1.checkAuth)([user_interface_1.Role.ADMIN, user_interface_1.Role.SENDER]), parcel_controller_1.parcelControllers.updateParcel);
router.route("/:id/status-log").patch((0, Validation_1.validation)(parcel_validator_1.parcelStatusUpdateZodSchema), (0, CheckAuth_1.checkAuth)([user_interface_1.Role.ADMIN]), parcel_controller_1.parcelControllers.updateParcelStatus);
router.route("/:id/approve").patch((0, CheckAuth_1.checkAuth)([user_interface_1.Role.RECEIVER]), parcel_controller_1.parcelControllers.approveParcel);
router.route("/:id/status-log").get((0, CheckAuth_1.checkAuth)([user_interface_1.Role.RECEIVER, user_interface_1.Role.SENDER, user_interface_1.Role.ADMIN]), parcel_controller_1.parcelControllers.getPresentParcelStatusDetails);
router.route("/:id/cancel-parcel").patch((0, CheckAuth_1.checkAuth)([user_interface_1.Role.SENDER]), parcel_controller_1.parcelControllers.cancelParcel);
exports.parcelRouter = router;
